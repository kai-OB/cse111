==30266== Memcheck, a memory error detector
==30266== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==30266== Using Valgrind-3.14.0 and LibVEX; rerun with -h for copyright info
==30266== Command: keyvalue test1.in test2.in test3.in
==30266== 
::::::::::::::::::::::::::::::::
test1.in
::::::::::::::::::::::::::::::::
test1.in: 1: a=b
a = b
test1.in: 2: key=value
key = value
test1.in: 3: this=is a test
this = is a test
test1.in: 4: this
this
this = is a test
test1.in: 5: key
key
key = value
test1.in: 6: a
a
a = b
test1.in: 7: =
==30266== Invalid read of size 4
==30266==    at 0x405086: __gnu_cxx::__exchange_and_add_single(int*, int) (atomicity.h:67)
==30266==    by 0x405100: __gnu_cxx::__exchange_and_add_dispatch(int*, int) (atomicity.h:84)
==30266==    by 0x405529: std::string::_Rep::_M_dispose(std::allocator<char> const&) (basic_string.h:3266)
==30266==    by 0x40534F: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() (basic_string.h:3640)
==30266==    by 0x40841D: xpair<std::string const, std::string>::~xpair() (xpair.h:20)
==30266==    by 0x408A51: listmap<std::string, std::string, xless<std::string> >::node::~node() (listmap.h:31)
==30266==    by 0x408B10: listmap<std::string, std::string, xless<std::string> >::erase(listmap<std::string, std::string, xless<std::string> >::iterator) (listmap.tcc:112)
==30266==    by 0x406E4D: catfile_helper(std::istream&, std::string const&) (main.cpp:119)
==30266==    by 0x4076BF: main (main.cpp:193)
==30266==  Address 0xfffffffffffffff8 is not stack'd, malloc'd or (recently) free'd
==30266== 
==30266== 
==30266== Process terminating with default action of signal 11 (SIGSEGV)
==30266==  Access not within mapped region at address 0xFFFFFFFFFFFFFFF8
==30266==    at 0x405086: __gnu_cxx::__exchange_and_add_single(int*, int) (atomicity.h:67)
==30266==    by 0x405100: __gnu_cxx::__exchange_and_add_dispatch(int*, int) (atomicity.h:84)
==30266==    by 0x405529: std::string::_Rep::_M_dispose(std::allocator<char> const&) (basic_string.h:3266)
==30266==    by 0x40534F: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() (basic_string.h:3640)
==30266==    by 0x40841D: xpair<std::string const, std::string>::~xpair() (xpair.h:20)
==30266==    by 0x408A51: listmap<std::string, std::string, xless<std::string> >::node::~node() (listmap.h:31)
==30266==    by 0x408B10: listmap<std::string, std::string, xless<std::string> >::erase(listmap<std::string, std::string, xless<std::string> >::iterator) (listmap.tcc:112)
==30266==    by 0x406E4D: catfile_helper(std::istream&, std::string const&) (main.cpp:119)
==30266==    by 0x4076BF: main (main.cpp:193)
==30266==  If you believe this happened as a result of a stack
==30266==  overflow in your program's main thread (unlikely but
==30266==  possible), you can try to increase the size of the
==30266==  main thread stack using the --main-stacksize= flag.
==30266==  The main thread stack size used in this run was 8388608.
==30266== 
==30266== HEAP SUMMARY:
==30266==     in use at exit: 14,063 bytes in 38 blocks
==30266==   total heap usage: 10,192 allocs, 10,154 frees, 193,241 bytes allocated
==30266== 
==30266== LEAK SUMMARY:
==30266==    definitely lost: 0 bytes in 0 blocks
==30266==    indirectly lost: 0 bytes in 0 blocks
==30266==      possibly lost: 0 bytes in 0 blocks
==30266==    still reachable: 14,063 bytes in 38 blocks
==30266==                       of which reachable via heuristic:
==30266==                         stdstring          : 390 bytes in 13 blocks
==30266==         suppressed: 0 bytes in 0 blocks
==30266== Rerun with --leak-check=full to see details of leaked memory
==30266== 
==30266== For counts of detected and suppressed errors, rerun with: -v
==30266== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
